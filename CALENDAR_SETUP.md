# üìÖ –ö–∞–ª–µ–Ω–¥–∞—Ä—å –∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### Backend
- ‚úÖ `ScheduleSlot` entity –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–ª–æ—Ç–∞–º–∏ –≤—Ä–µ–º–µ–Ω–∏ –º–∞—Å—Ç–µ—Ä–æ–≤
- ‚úÖ –ü–æ–ª–µ `scheduledAt` –≤ `Order` entity
- ‚úÖ `ScheduleService` —Å –º–µ—Ç–æ–¥–∞–º–∏:
  - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª–æ—Ç–æ–≤ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
  - –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤
  - –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ª–æ—Ç–æ–≤ –¥–ª—è –∑–∞–∫–∞–∑–æ–≤
  - –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞/—Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å–ª–æ—Ç–æ–≤
  - –û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ —Å–ª–æ—Ç–æ–≤ –ø—Ä–∏ –æ—Ç–º–µ–Ω–µ –∑–∞–∫–∞–∑–æ–≤
  - –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏—Ö –∑–∞–∫–∞–∑–æ–≤
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏—Ö –∑–∞–∫–∞–∑–∞—Ö (–∑–∞ 15 –∏ 30 –º–∏–Ω—É—Ç)
- ‚úÖ REST API endpoints –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

### Frontend
- ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `Calendar` - –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å —Å –≤—ã–¥–µ–ª–µ–Ω–∏–µ–º –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–∞—Ç
- ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `TimeSlotSelector` - –≤—ã–±–æ—Ä –≤—Ä–µ–º–µ–Ω–∏ –∏–∑ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ `OrderModal` - –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–∫–∞–∑–∞
- ‚úÖ API –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º

## üìä API Endpoints

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª–æ—Ç–æ–≤ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
```
POST /api/schedule/slots/generate
Body: {
  masterId: string,
  startDate: string (ISO),
  endDate: string (ISO),
  slotDurationMinutes?: number (default: 60),
  workingHours?: { start: "09:00", end: "18:00" }
}
```

### –ü–æ–ª—É—á–∏—Ç—å —Å–ª–æ—Ç—ã –º–∞—Å—Ç–µ—Ä–∞
```
GET /api/schedule/masters/:masterId/slots?startDate=...&endDate=...&availableOnly=true
```

### –ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Å–ª–æ—Ç
```
POST /api/schedule/book
Body: {
  masterId: string,
  startTime: string (ISO),
  endTime: string (ISO),
  orderId: string
}
```

### –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å/—Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Å–ª–æ—Ç
```
PATCH /api/schedule/slots/:slotId/block
PATCH /api/schedule/slots/:slotId/unblock
```

### –û—Å–≤–æ–±–æ–¥–∏—Ç—å —Å–ª–æ—Ç—ã –∑–∞–∫–∞–∑–∞
```
DELETE /api/schedule/orders/:orderId/release
```

### –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏–µ –∑–∞–∫–∞–∑—ã
```
GET /api/schedule/masters/:masterId/upcoming?limit=10
GET /api/schedule/clients/:clientId/upcoming?limit=10
```

## üéØ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –°–æ–∑–¥–∞–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –¥–ª—è –º–∞—Å—Ç–µ—Ä–∞

1. –ú–∞—Å—Ç–µ—Ä (–∏–ª–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä) –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–ª–æ—Ç—ã:
```typescript
await scheduleAPI.generateSlots({
  masterId: "master-uuid",
  startDate: "2024-01-01T00:00:00Z",
  endDate: "2024-01-31T23:59:59Z",
  slotDurationMinutes: 60,
  workingHours: { start: "09:00", end: "18:00" }
});
```

2. –°–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞—Å—Ç –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–ª–æ—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–∞–±–æ—á–µ–≥–æ –¥–Ω—è

### –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–∫–∞–∑–∞

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É **–ó–∞–∫–∞–∑—ã**
2. –ù–∞–∂–º–∏—Ç–µ **"+ –°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑"**
3. –í—ã–±–µ—Ä–∏—Ç–µ –º–∞—Å—Ç–µ—Ä–∞
4. –ù–∞–∂–º–∏—Ç–µ **"–í—ã–±—Ä–∞—Ç—å –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è"**
5. –í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ
6. –í—ã–±–µ—Ä–∏—Ç–µ –¥–æ—Å—Ç—É–ø–Ω—ã–π –≤—Ä–µ–º–µ–Ω–Ω–æ–π —Å–ª–æ—Ç
7. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è –∑–∞–∫–∞–∑–∞
8. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∑–∞–∫–∞–∑

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º –º–∞—Å—Ç–µ—Ä–æ–º

- **–ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Å–ª–æ—Ç**: —Å–¥–µ–ª–∞—Ç—å –µ–≥–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–º –¥–ª—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- **–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Å–ª–æ—Ç**: –≤–µ—Ä–Ω—É—Ç—å –≤ –¥–æ—Å—Ç—É–ø–Ω—ã–µ
- **–ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è**: –≤—Å–µ —Å–ª–æ—Ç—ã —Å –∏—Ö —Å—Ç–∞—Ç—É—Å–∞–º–∏

## üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:
- **–ó–∞ 30 –º–∏–Ω—É—Ç** –¥–æ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∑–∞–∫–∞–∑–∞
- **–ó–∞ 15 –º–∏–Ω—É—Ç** –¥–æ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∑–∞–∫–∞–∑–∞

–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—É—á–∞—é—Ç:
- –ú–∞—Å—Ç–µ—Ä (–æ –ø—Ä–µ–¥—Å—Ç–æ—è—â–µ–º –≤–∏–∑–∏—Ç–µ)
- –ö–ª–∏–µ–Ω—Ç (–æ –ø—Ä–µ–¥—Å—Ç–æ—è—â–µ–º –≤–∏–∑–∏—Ç–µ –º–∞—Å—Ç–µ—Ä–∞)

### –§–æ—Ä–º–∞—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:
```javascript
{
  order: {
    id: string,
    description: string,
    scheduledAt: Date,
    client/master: object
  },
  minutesUntil: number,
  message: string
}
```

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ `schedule_slots`:
- `id` (uuid, primary key)
- `master_id` (uuid, foreign key ‚Üí users)
- `start_time` (timestamp)
- `end_time` (timestamp)
- `status` (enum: available, booked, blocked)
- `order_id` (uuid, nullable, foreign key ‚Üí orders)
- `created_at`, `updated_at` (timestamps)
- **–£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å**: (master_id, start_time)

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ `orders`:
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `scheduled_at` (timestamp, nullable)

## ‚öôÔ∏è Cron –∑–∞–¥–∞—á–∏

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏—Ö –∑–∞–∫–∞–∑–æ–≤ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è **–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç** —á–µ—Ä–µ–∑ `@nestjs/schedule`:
- –ù–∞—Ö–æ–¥–∏—Ç –∑–∞–∫–∞–∑—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—á–Ω—É—Ç—Å—è —á–µ—Ä–µ–∑ 15 –∏–ª–∏ 30 –º–∏–Ω—É—Ç
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –º–∞—Å—Ç–µ—Ä—É –∏ –∫–ª–∏–µ–Ω—Ç—É

## üé® –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### Calendar
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å —Å –º–µ—Å—è—á–Ω–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π
- –í—ã–¥–µ–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö, –∑–∞–Ω—è—Ç—ã—Ö –∏ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –¥–∞—Ç
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ dark mode
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π/–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –¥–∞—Ç–µ

### TimeSlotSelector
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π –¥–∞—Ç—ã
- –í–∏–∑—É–∞–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–ª–æ—Ç–æ–≤
- –í—ã–±–æ—Ä –≤—Ä–µ–º–µ–Ω–∏ –æ–¥–Ω–∏–º –∫–ª–∏–∫–æ–º
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª–æ—Ç–æ–≤** - –º–∞—Å—Ç–µ—Ä –¥–æ–ª–∂–µ–Ω —Å–æ–∑–¥–∞—Ç—å —Å–ª–æ—Ç—ã –∑–∞—Ä–∞–Ω–µ–µ –¥–ª—è –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–∞—Ç
2. **–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–ª–æ—Ç–æ–≤** - –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 60 –º–∏–Ω—É—Ç, –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å
3. **–†–∞–±–æ—á–∏–µ —á–∞—Å—ã** - –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 09:00-18:00, –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å
4. **–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–∫–∞–∑–∞ —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º
5. **–û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ —Å–ª–æ—Ç–æ–≤** - –ø—Ä–∏ –æ—Ç–º–µ–Ω–µ –∑–∞–∫–∞–∑–∞ —Å–ª–æ—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Å–≤–æ–±–æ–∂–¥–∞—é—Ç—Å—è

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
- [ ] –†–µ—Ü–∏—Ä–∫—É–ª—è—Ä–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è (–ø–æ–≤—Ç–æ—Ä—è—é—â–µ–µ—Å—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ)
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Google Calendar / iCal
- [ ] Email/SMS —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫ WebSocket
- [ ] –ö–∞–ª–µ–Ω–¥–∞—Ä–Ω—ã–π –≤–∏–¥ –¥–ª—è –º–∞—Å—Ç–µ—Ä–æ–≤ (–ø—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ–≥–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è)
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª–æ—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ —à–∞–±–ª–æ–Ω–æ–≤
- [ ] –ü–µ—Ä–µ–∫—Ä—ã–≤–∞—é—â–∏–µ—Å—è —Å–ª–æ—Ç—ã –¥–ª—è –≥—Ä—É–ø–ø–æ–≤—ã—Ö —É—Å–ª—É–≥

